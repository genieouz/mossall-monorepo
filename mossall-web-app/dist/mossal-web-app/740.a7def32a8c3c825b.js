"use strict";(self.webpackChunkmossal_web_app=self.webpackChunkmossal_web_app||[]).push([[740],{9740:(R,f,l)=>{l.r(f),l.d(f,{CollaboratorsModule:()=>T});var c=l(177),i=l(7062),o=l(4438);let x=(()=>{class r{constructor(){this.requests=[{},{},{},{},{},{}]}static#o=this.\u0275fac=function(a){return new(a||r)};static#t=this.\u0275cmp=o.VBU({type:r,selectors:[["app-collaborators"]],decls:1,vars:0,template:function(a,n){1&a&&o.nrm(0,"router-outlet")},dependencies:[i.n3]})}return r})();var p=l(7393),h=l(4827),m=l(9213),s=l(2920),F=l(2649);function y(r,d){if(1&r){const t=o.RV6();o.j41(0,"tr",25)(1,"td",26)(2,"span",27),o.bIt("click",function(){const n=o.eBV(t).$implicit,u=o.XpG();return o.Njj(u.selectCollab(n))}),o.k0s(),o.j41(3,"span"),o.EFF(4),o.k0s()(),o.j41(5,"td",28)(6,"div",29),o.EFF(7,"AC"),o.k0s(),o.j41(8,"span"),o.EFF(9),o.k0s()(),o.j41(10,"td",30),o.EFF(11),o.k0s(),o.j41(12,"td",31),o.EFF(13),o.nI1(14,"date"),o.k0s(),o.j41(15,"td",32)(16,"div",33)(17,"span",34)(18,"span",35)(19,"span"),o.EFF(20,"Action"),o.k0s(),o.nrm(21,"span",36),o.k0s(),o.j41(22,"mat-icon",37),o.EFF(23,"keyboard_arrow_down"),o.k0s()(),o.j41(24,"div",38)(25,"div",39)(26,"span")(27,"mat-icon"),o.EFF(28,"edit"),o.k0s()(),o.j41(29,"span"),o.EFF(30,"Editer"),o.k0s()()()()()()}if(2&r){const t=d.$implicit,a=o.XpG();o.R7$(2),o.ZvI("radio ",(null==a.selectedCollab?null:a.selectedCollab.id)===t.id?"active":"",""),o.R7$(2),o.JRh((null==t.organization?null:t.organization.name)||"Agiltoo"),o.R7$(5),o.Lme("",t.firstName," ",t.lastName,""),o.R7$(2),o.JRh(t.phoneNumber),o.R7$(2),o.JRh(o.i5U(14,10,t.createdAt,"YYYY-MM-dd")),o.R7$(12),o.Mz_("routerLink","/dashboard/collaborators/",t.id,"")}}let v=(()=>{class r{constructor(t){this.fetchOrganizationCollaboratorsGQL=t,this.collabs=[],this.fetchCollabs()}fetchCollabs(){this.fetchOrganizationCollaboratorsGQL.fetch({},{fetchPolicy:"no-cache"}).subscribe(t=>{this.collabs=t.data.fetchOrganizationCollaborators,this.selectedCollab=this.collabs?.[0]})}selectCollab(t){this.selectedCollab=t}static#o=this.\u0275fac=function(a){return new(a||r)(o.rXU(p.lV))};static#t=this.\u0275cmp=o.VBU({type:r,selectors:[["app-overview"]],decls:51,vars:2,consts:[["fxLayout","row","fxLayoutAlign","none start","fxLayoutGap","40px",1,"page-wrapper"],["fxFlex","auto","fxLayout","column","fxLayoutGap","18px"],["fxLayout","row","fxLayoutGap","19px"],["fxFlex","auto","fxLayoutAlign","start center",1,"search-container"],["fxLayoutAlign","center center",1,"icon"],["type","text","placeholder","Recherche",1,"form-control"],["appDropdown","downlod-dropdown",1,"dropdown"],["fxLayoutAlign","center center","fxLayoutGap","8px",1,"btn","btn-primary"],["fxLayoutAlign","center center"],["id","downlod-dropdown",1,"dropdown-content"],["fxLayout","column","fxLayoutGap","16px","fxLayoutAlign","start center",1,"dropdown-option"],[1,"icon"],["src","./assets/img/icon-upload.png","alt",""],["fxLayout","column","fxLayoutGap","4px","fxLayoutAlign","start center"],[1,"type"],[1,"format"],["src","./assets/img/icon-download.png","alt",""],["fxLayoutAlign","center center","fxLayoutGap","8px","routerLink","/dashboard/collaborators/create-collaborator",1,"btn","btn-primary"],[1,"table","table-wrapper"],["fxLayout","row","fxLayoutAlign","space-between center",1,"titles-container"],["fxFlex","16.6","fxLayoutAlign","start center",1,"title"],["fxFlex","16.6","fxLayoutAlign","center center",1,"title"],["class","user","fxLayout","row","fxLayoutAlign","space-between center",4,"ngFor","ngForOf"],[1,"info-current-user"],[3,"user"],["fxLayout","row","fxLayoutAlign","space-between center",1,"user"],["fxFlex","16.6","fxLayoutAlign","start center","fxLayout","row","fxLayoutGap","16px",1,"radio-container"],["fxLayoutAlign","center center",3,"click"],["fxFlex","16.6","fxLayoutAlign","center center","fxLayoutGap","8px",1,"name"],["fxLayoutAlign","center center",1,"circle"],["fxFlex","16.6","fxLayoutAlign","center center",1,"solde"],["fxFlex","16.6","fxLayoutAlign","center center",1,"date"],["fxFlex","16.6","fxLayoutAlign","end center"],["fxFlex","100","appDropdown","dropdown-action",1,"dropdown"],["fxLayout","row",1,"btn-edit-statut"],["fxFlex","auto","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","center center",1,"text"],[1,"statut","statut--valid"],["fxLayoutAlign","center center",1,"dropdown-icon"],["id","dropdown-action",1,"dropdown-content","dropdown-content-filter"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","12px",1,"dropdown-option",3,"routerLink"]],template:function(a,n){1&a&&(o.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),o.EFF(5,"search"),o.k0s(),o.nrm(6,"input",5),o.k0s(),o.j41(7,"div",2)(8,"div",6)(9,"button",7)(10,"mat-icon",8),o.EFF(11,"cloud_download"),o.k0s(),o.j41(12,"span"),o.EFF(13,"Importer un fichier"),o.k0s()(),o.j41(14,"div",9)(15,"div",10)(16,"div",11),o.nrm(17,"img",12),o.k0s(),o.j41(18,"div",13)(19,"span",14),o.EFF(20,"Importer"),o.k0s(),o.j41(21,"span",15),o.EFF(22,"Format accept\xe9 : csv"),o.k0s()()(),o.j41(23,"div",10)(24,"div",11),o.nrm(25,"img",16),o.k0s(),o.j41(26,"div",13)(27,"span",14),o.EFF(28,"T\xe9l\xe9charger le template"),o.k0s(),o.j41(29,"span",15),o.EFF(30,"template.csv"),o.k0s()()()()(),o.j41(31,"button",17)(32,"span"),o.EFF(33,"+"),o.k0s(),o.j41(34,"span"),o.EFF(35,"Ajouter un collaborateur"),o.k0s()()()(),o.j41(36,"table",18)(37,"tr",19)(38,"th",20),o.EFF(39,"Entreprise"),o.k0s(),o.j41(40,"th",21),o.EFF(41,"Collaborateur"),o.k0s(),o.j41(42,"th",21),o.EFF(43,"Telephone"),o.k0s(),o.j41(44,"th",21),o.EFF(45,"Date de cr\xe9ation"),o.k0s(),o.j41(46,"th",21),o.EFF(47,"Actions"),o.k0s()(),o.DNE(48,y,31,13,"tr",22),o.k0s()(),o.j41(49,"div",23),o.nrm(50,"app-user-details",24),o.k0s()()),2&a&&(o.R7$(48),o.Y8G("ngForOf",n.collabs),o.R7$(2),o.Y8G("user",n.selectedCollab))},dependencies:[c.Sq,i.Wk,h.B,m.An,s.DJ,s.BO,s.sA,s.UI,F.x,c.vh],styles:["#downlod-dropdown[_ngcontent-%COMP%]{margin-top:8px;border-radius:15px;border:2px dashed #979797;background:var(--Blanc, #FFF)}#downlod-dropdown.show[_ngcontent-%COMP%]{display:flex!important}#downlod-dropdown[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{color:var(--Noir, #000);font-family:Poppins;font-size:16px;font-weight:400}#downlod-dropdown[_ngcontent-%COMP%]   .format[_ngcontent-%COMP%]{color:var(--Noir, #000);font-family:Poppins;font-size:11px;font-weight:400;line-height:120%;letter-spacing:.055px}#downlod-dropdown[_ngcontent-%COMP%]   .dropdown-option[_ngcontent-%COMP%]{padding:24px 40px}"]})}return r})();var e=l(9417),C=l(5865);const g=()=>["/dashboard/collaborators"];function L(r,d){1&r&&(o.j41(0,"div",6)(1,"label",28),o.EFF(2,"Adresse mail"),o.k0s(),o.nrm(3,"input",29),o.k0s())}function k(r,d){if(1&r){const t=o.RV6();o.j41(0,"div",30)(1,"button",31),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.edit())}),o.EFF(2,"Sauvegarder"),o.k0s(),o.j41(3,"button",32),o.EFF(4,"Suspendre"),o.k0s()()}2&r&&(o.R7$(3),o.Y8G("routerLink",o.lJ4(1,g)))}function w(r,d){if(1&r){const t=o.RV6();o.j41(0,"div")(1,"button",33),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.submitForm())}),o.EFF(2,"Envoy\xe9"),o.k0s()()}}function E(r,d){if(1&r&&(o.j41(0,"form",1)(1,"span",2),o.EFF(2),o.k0s(),o.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),o.EFF(8,"Pr\xe9nom"),o.k0s(),o.nrm(9,"input",8),o.k0s(),o.j41(10,"div",6)(11,"label",9),o.EFF(12,"Nom"),o.k0s(),o.nrm(13,"input",10),o.k0s(),o.DNE(14,L,4,0,"div",11),o.j41(15,"div",6)(16,"label",12),o.EFF(17,"T\xe9l"),o.k0s(),o.nrm(18,"input",13),o.k0s(),o.j41(19,"div",6)(20,"label",14),o.EFF(21,"Adresse postale"),o.k0s(),o.nrm(22,"input",15),o.k0s()(),o.j41(23,"div",5)(24,"div",6)(25,"label",16),o.EFF(26,"Fonction"),o.k0s(),o.nrm(27,"input",17),o.k0s(),o.j41(28,"div",6)(29,"label",18),o.EFF(30,"Identifiant unique"),o.k0s(),o.nrm(31,"input",19),o.k0s(),o.j41(32,"div",6)(33,"label",20),o.EFF(34,"Salaire"),o.k0s(),o.nrm(35,"input",21),o.k0s(),o.j41(36,"div",6)(37,"label",22),o.EFF(38,"N\xb0 Compte Cofina"),o.k0s(),o.nrm(39,"input",23),o.k0s(),o.j41(40,"div",6)(41,"label",24),o.EFF(42,"N\xb0 Compte Wizall"),o.k0s(),o.nrm(43,"input",25),o.k0s()()(),o.DNE(44,k,5,2,"div",26)(45,w,3,0,"div",27),o.k0s()()),2&r){const t=o.XpG();o.Y8G("formGroup",t.collaboratorForm),o.R7$(2),o.JRh(t.formText),o.R7$(12),o.Y8G("ngIf","edit"!=t.formType),o.R7$(30),o.Y8G("ngIf","edit"==t.formType),o.R7$(),o.Y8G("ngIf","create"==t.formType)}}let b=(()=>{class r{constructor(t,a,n,u,_,O){this.fb=t,this.inviteCollaboratorGQL=a,this.router=n,this.snackBarService=u,this.fetchOrganizationCollaboratorGQL=_,this.updateCollaboratorGQL=O,this.formText="",this.isLoading=!1,this.collaboratorForm=this.fb.group({email:["",e.k0.required],firstName:["",e.k0.required],lastName:["",e.k0.required],phoneNumber:["",e.k0.required],address:[""],position:["",e.k0.required],uniqueIdentifier:[""],salary:[0,e.k0.required],wizallAccountNumber:["",e.k0.required],bankAccountNumber:["",e.k0.required]})}ngOnInit(){this.formText="edit"==this.formType?"Modifier les infos du collaborateur ":"Cr\xe9ation compte collaborateur"}ngOnChanges(t){this.getCollab()}submitForm(){this.collaboratorForm.invalid||this.isLoading?this.collaboratorForm.markAllAsTouched():(this.isLoading=!0,this.inviteCollaboratorGQL.mutate({collaboratorInput:this.collaboratorForm.value}).subscribe(t=>{this.isLoading=!1,t.data&&(this.router.navigate(["/dashboard/collaborators"]),this.snackBarService.showSuccessSnackBar("Invitation envoy\xe9 au collaborateur"))},t=>{this.isLoading=!1}))}edit(){if(this.collaboratorForm.invalid||this.isLoading)return void this.collaboratorForm.markAllAsTouched();this.isLoading=!0;const t={...this.collaboratorForm.value,salary:Number(this.collaboratorForm.value.salary||0)};delete t.email,this.updateCollaboratorGQL.mutate({collaboratorInput:t,collaboratorId:this.collaboratorId}).subscribe(a=>{this.isLoading=!1,a.data&&(this.router.navigate(["/dashboard/collaborators"]),this.snackBarService.showSuccessSnackBar("Collaborator modifi\xe9 avec succ\xe9s"))},a=>{this.isLoading=!1})}getCollab(){this.collaboratorId&&this.fetchOrganizationCollaboratorGQL.fetch({collaboratorId:this.collaboratorId}).subscribe(t=>{this.collaborator=t.data.fetchOrganizationCollaborator,this.collaboratorForm.patchValue(this.collaborator)})}static#o=this.\u0275fac=function(a){return new(a||r)(o.rXU(e.ok),o.rXU(p.oT),o.rXU(i.Ix),o.rXU(C.v),o.rXU(p.im),o.rXU(p.kz))};static#t=this.\u0275cmp=o.VBU({type:r,selectors:[["app-form-collaborator"]],inputs:{formType:"formType",collaboratorId:"collaboratorId"},features:[o.OA$],decls:1,vars:1,consts:[["class","form-container form-container-card","fxLayout","column","fxLayoutGap","57px",3,"formGroup",4,"ngIf"],["fxLayout","column","fxLayoutGap","57px",1,"form-container","form-container-card",3,"formGroup"],[1,"title"],["fxLayout","column","fxLayoutGap","38px"],["fxLayout","row","fxLayoutGap","32px"],["fxFlex","50","fxLayout","column","fxLayoutGap","38px",1,"wrapper"],["fxLayout","column","fxLayoutGap","15px"],["for","prenom"],["formControlName","firstName","type","text","id","prenom","placeholder","John",1,"form-control"],["for","nom"],["formControlName","lastName","type","text","id","nom","placeholder","Doe",1,"form-control"],["fxLayout","column","fxLayoutGap","15px",4,"ngIf"],["for","phone"],["formControlName","phoneNumber","type","text","id","phone","placeholder","+221 77 000 00 00",1,"form-control"],["for","code-postal"],["formControlName","address","type","text","id","code-postal","placeholder","",1,"form-control"],["for","fonction"],["formControlName","position","type","text","id","fonction",1,"form-control"],["for","unique-id"],["formControlName","uniqueIdentifier","type","text","id","unique-id",1,"form-control"],["for","salary"],["formControlName","salary","type","number","id","salary",1,"form-control"],["for","nbr-compte"],["formControlName","bankAccountNumber","type","text","id","nbr-compte",1,"form-control"],["for","nbr-wizzal"],["formControlName","wizallAccountNumber","type","text","id","nbr-wizzal",1,"form-control"],["fxLayout","row","fxLayoutGap","38px",4,"ngIf"],[4,"ngIf"],["for","address"],["formControlName","email","type","text","id","address","placeholder","john@gmail.com",1,"form-control"],["fxLayout","row","fxLayoutGap","38px"],["fxFlex","50",1,"btn","btn-primary",3,"click"],["fxFlex","50","routerLinkActive","router-link-active",1,"btn","btn-form-default",3,"routerLink"],["fxFlex","50",1,"submit",3,"click"]],template:function(a,n){1&a&&o.DNE(0,E,46,5,"form",0),2&a&&o.Y8G("ngIf",n.collaboratorForm)},dependencies:[c.bT,i.Wk,i.wQ,s.DJ,s.BO,s.UI,e.qT,e.me,e.Q0,e.BC,e.cb,e.j4,e.JD]})}return r})();const j=[{path:"",component:x,children:[{path:"",component:v},{path:"create-collaborator",component:(()=>{class r{static#o=this.\u0275fac=function(a){return new(a||r)};static#t=this.\u0275cmp=o.VBU({type:r,selectors:[["app-create-collobator"]],decls:1,vars:1,consts:[[3,"formType"]],template:function(a,n){1&a&&o.nrm(0,"app-form-collaborator",0),2&a&&o.Y8G("formType","create")},dependencies:[b]})}return r})()},{path:":id",component:(()=>{class r{constructor(t){this.route=t,this.route.paramMap.subscribe(a=>{this.collaboratorId=a.get("id"),console.log("collaboratorId ID:",this.collaboratorId)})}static#o=this.\u0275fac=function(a){return new(a||r)(o.rXU(i.nX))};static#t=this.\u0275cmp=o.VBU({type:r,selectors:[["app-edit-collaborator"]],decls:1,vars:2,consts:[[3,"collaboratorId","formType"]],template:function(a,n){1&a&&o.nrm(0,"app-form-collaborator",0),2&a&&o.Y8G("collaboratorId",n.collaboratorId)("formType","edit")},dependencies:[b]})}return r})()}]}];let G=(()=>{class r{static#o=this.\u0275fac=function(a){return new(a||r)};static#t=this.\u0275mod=o.$C({type:r});static#r=this.\u0275inj=o.G2t({imports:[c.MD,i.iI.forChild(j),i.iI]})}return r})();var A=l(1434),I=l(6924),N=l(6654);let T=(()=>{class r{static#o=this.\u0275fac=function(a){return new(a||r)};static#t=this.\u0275mod=o.$C({type:r});static#r=this.\u0275inj=o.G2t({imports:[c.MD,G,A.k,m.m_,I.YF,N.k,e.X1]})}return r})()}}]);